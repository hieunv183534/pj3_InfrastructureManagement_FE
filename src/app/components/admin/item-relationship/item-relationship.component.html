<div class="card">
  <p-fieldset legend="Thông tin cơ bản đối tượng" [toggleable]="true">
    <form>
      <div *ngIf="itemDetail" class="p-fluid grid hieunv-item-detail">
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Mã đối tượng: </h4>
          <p>{{itemDetail.baseInfo.item.code}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Tên đối tượng: </h4>
          <p>{{itemDetail.baseInfo.item.name}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Danh mục: </h4>
          <p>{{itemDetail.baseInfo.category.name}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Chỉ số chất lượng: </h4>
          <p>{{itemDetail.baseInfo.item.qualityScore}} / 100</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Trạng thái : </h4>
          <p>{{ getStatus(itemDetail.baseInfo.item.status)}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Số đối tượng thành phần : </h4>
          <p>{{itemDetail.numOfAPart}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Số đối tượng chứa : </h4>
          <p>{{itemDetail.numOfPosition}}</p>
        </div>
        <div class="p-field col-3 md-12">
          <h4 class="mr5">Ngày cập nhật gần nhất: </h4>
          <p>{{getDateTime(itemDetail.baseInfo.item.modifiedAt)}}</p>
        </div>
      </div>
    </form>
  </p-fieldset>
  <br>
  <p-accordion [multiple]="true">
    <p-accordionTab header="Danh sách đối tượng con">
      <p-tabView>
        <p-tabPanel header="Thành phần">
          <p-fieldset legend="Tìm kiếm" [toggleable]="true">
            <form [formGroup]="formSearch1" (ngSubmit)="onSearchSubmit1()">
              <div class="p-fluid grid">
                <div class="p-field col-6 md-12">
                  <span class="p-float-label">
                    <input type="text" id="filter" pInputText formControlName="filter" />
                    <label for="filter">Key Search</label>
                  </span>
                </div>
                <div class="p-field col-6 md-12">
                  <span class="p-float-label">
                    <p-treeSelect [options]="treeCategory" selectionMode="single" placeholder="Chọn danh mục"
                      (onNodeSelect)="selectCategory1($event)"></p-treeSelect>
                    <label for="filter">Danh mục</label>
                  </span>
                </div>
              </div>
            </form>
            <p-toolbar styleClass="flex align-items-center justify-content-center">
              <button pButton pRipple label="Tìm kiếm" icon="pi pi-search" class="p-button p-mr-2"
                (click)="onSearchSubmit1()"></button>
            </p-toolbar>
          </p-fieldset>
          <p-table #dt [value]="listItem1" [rowHover]="true" dataKey="id"
            styleClass="p-datatable-customers p-datatable-gridlines p-datatable-striped p-datatable-sm"
            [globalFilterFields]="['code','name']">
            <ng-template pTemplate="header">
              <tr class="ng-star-inserted">
                <th style="width: 5rem">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th pSortableColumn="code">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Mã đối tượng
                    <p-sortIcon field="code"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="name">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Tên đối tượng
                    <p-sortIcon field="name"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="qualityScore">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Chất lượng
                    <p-sortIcon field="qualityScore"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="status">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Trạng thái
                    <p-sortIcon field="status"></p-sortIcon>
                  </div>
                </th>
                <th>
                  <div class="flex justify-content-between align-items-center">
                    Thao tác
                  </div>
                </th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>
                  <p-tableCheckbox [value]="item"></p-tableCheckbox>
                </td>
                <td>{{item.code}}</td>
                <td>{{item.name}}</td>
                <td>{{item.qualityScore}}</td>
                <td>{{item.status}}</td>
                <td>
                  <button pButton pRipple icon="pi pi-sitemap" pTooltip="Quản lí liên kết đối tượng"
                    tooltipPosition="top" class="p-button-rounded p-button-help mr-2 p-button-sm"></button>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="8">Không tồn tại dữ liệu.</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="summary">
              <p-paginator [pageLinkSize]="pageSize1" [rows]="pageSize1" [totalRecords]="totalRecords1"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} record"
                [showCurrentPageReport]="true" [rowsPerPageOptions]="pageSizeOptions"
                (onPageChange)="onPageChange1($event)">
              </p-paginator>
              <div class="flex align-items-center justify-content-center">
                In total there are {{ totalRecords1 }} dataObjects.
              </div>
            </ng-template>
          </p-table>
        </p-tabPanel>
        <p-tabPanel header="Chứa">
          <p-fieldset legend="Tìm kiếm" [toggleable]="true">
            <form [formGroup]="formSearch2" (ngSubmit)="onSearchSubmit2()">
              <div class="p-fluid grid">
                <div class="p-field col-6 md-12">
                  <span class="p-float-label">
                    <input type="text" id="filter" pInputText formControlName="filter" />
                    <label for="filter">Key Search</label>
                  </span>
                </div>
                <div class="p-field col-6 md-12">
                  <span class="p-float-label">
                    <p-treeSelect [options]="treeCategory" selectionMode="single" placeholder="Chọn danh mục"
                      (onNodeSelect)="selectCategory2($event)"></p-treeSelect>
                    <label for="filter">Danh mục</label>
                  </span>
                </div>
              </div>
            </form>
            <p-toolbar styleClass="flex align-items-center justify-content-center">
              <button pButton pRipple label="Tìm kiếm" icon="pi pi-search" class="p-button p-mr-2"
                (click)="onSearchSubmit2()"></button>
            </p-toolbar>
          </p-fieldset>
          <p-table #dt [value]="listItem2" [rowHover]="true" dataKey="id"
            styleClass="p-datatable-customers p-datatable-gridlines p-datatable-striped p-datatable-sm"
            [globalFilterFields]="['code','name']">
            <ng-template pTemplate="header">
              <tr class="ng-star-inserted">
                <th style="width: 5rem">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th pSortableColumn="code">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Mã đối tượng
                    <p-sortIcon field="code"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="name">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Tên đối tượng
                    <p-sortIcon field="name"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="qualityScore">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Chất lượng
                    <p-sortIcon field="qualityScore"></p-sortIcon>
                  </div>
                </th>
                <th pSortableColumn="status">
                  <div class="flex justify-content-between align-items-center ml-auto">
                    Trạng thái
                    <p-sortIcon field="status"></p-sortIcon>
                  </div>
                </th>
                <th>
                  <div class="flex justify-content-between align-items-center">
                    Thao tác
                  </div>
                </th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>
                  <p-tableCheckbox [value]="item"></p-tableCheckbox>
                </td>
                <td>{{item.code}}</td>
                <td>{{item.name}}</td>
                <td>{{item.qualityScore}}</td>
                <td>{{item.status}}</td>
                <td>
                  <button pButton pRipple icon="pi pi-sitemap" pTooltip="Quản lí liên kết đối tượng"
                    tooltipPosition="top" class="p-button-rounded p-button-help mr-2 p-button-sm"></button>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="8">Không tồn tại dữ liệu.</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="summary">
              <p-paginator [pageLinkSize]="pageSize2" [rows]="pageSize2" [totalRecords]="totalRecords2"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} record"
                [showCurrentPageReport]="true" [rowsPerPageOptions]="pageSizeOptions"
                (onPageChange)="onPageChange2($event)">
              </p-paginator>
              <div class="flex align-items-center justify-content-center">
                In total there are {{ totalRecords2 }} dataObjects.
              </div>
            </ng-template>
          </p-table>
        </p-tabPanel>
      </p-tabView>
    </p-accordionTab>
    <p-accordionTab header="Đối tượng cha">
      <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem
        aperiam, eaque ipsa quae ab illo inventore veritatis et quasi
        architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit
        aut fugit, sed quia consequuntur magni dolores eos qui ratione
        voluptatem sequi nesciunt. Consectetur, adipisci velit, sed quia non numquam eius modi.</p>
    </p-accordionTab>
  </p-accordion>
</div>
